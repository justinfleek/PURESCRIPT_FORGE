# libseccomp - Prebuilt static library from Nix
# LIBSECCOMP_LIB_DIR is set by flake.nix shellHook
#
# This provides the libseccomp C library for the seccompiler crate,
# which uses FFI bindings to compile JSON seccomp policies into BPF.

genrule(
    name = "libseccomp-lib",
    out = "libseccomp.a",
    cmd = "ln -s $LIBSECCOMP_LIB_DIR/libseccomp.a \"$OUT\"",
)

prebuilt_cxx_library(
    name = "libseccomp",
    static_lib = ":libseccomp-lib",
    preferred_linkage = "static",
    visibility = ["PUBLIC"],
)
